import{E as U}from"./index-4e1a750d.js";import{o as x,d as L,a as z,u as N}from"./orgList-023bab2c.js";import{r as l,S as Q,h as H,aG as M,az as s,ab as K,aH as B}from"./index-8a138cee.js";import{getColumns as $,formConfigs as j}from"./config-22be7e81.js";import{s as G}from"./common-48d0560d.js";import{u as _}from"./common-a712efb0.js";import"./TitleCate-392c35fb.js";import"./regExp-b8203c09.js";function te(){const g=l(),y=l(),i=l(),d=l(!1),m=l([]),v=l([]),p=l([]),A=_(".app-main .el-scrollbar",60+64+48),c=Q({total:0,pageSize:10,currentPage:1,background:!0}),h=l({}),S=[{label:"ID",value:"id"},{label:"组织简称",value:"shortName"},{label:"组织内码",value:"orgCode"},{label:"组织地址",value:"orgAddress"},{label:"联系方式",value:"tel"},{label:"传真",value:"tax"},{label:"状态",value:"status",readonly:!0,children:[{label:"开启",value:1},{label:"关闭",value:0}]},{label:"PC端组织域名",value:"orgDomain"},{label:"PC端组织域名端口",value:"orgDomainPort"},{label:"组织Logo",value:"logo"},{label:"是否启用金蝶",value:"kingdeeEnable",readonly:!0,children:[{label:"启用",value:!0},{label:"关闭",value:!1}]},{label:"AcctId",value:"kdApiAcctId"},{label:"AppId",value:"kdApiAppId"},{label:"AppSec",value:"kdApiAppSec"},{label:"LCID",value:"kdApiLCID"},{label:"ServerUrl",value:"kdApiServerUrl"},{label:"FcreateorgId",value:"kdApiFcreateorgid"},{label:"FuseorgId",value:"kdApiFuseorgid"},{label:"是否启用群晖",value:"qhEnable",readonly:!0,children:[{label:"启用",value:!0},{label:"关闭",value:!1}]},{label:"Host",value:"qhFileHost"},{label:"IP",value:"qhFileIp"},{label:"Port",value:"qhFilePort"},{label:"UserName",value:"qhFileUserName"},{label:"Password",value:"qhFilePassword"},{label:"OrgDomainPort",value:"qywxOrgDomainPort"},{label:"OrgDomain",value:"qywxOrgDomain"},{label:"Oauth2Url",value:"qywxOauth2url"},{label:"CorpId",value:"qywxCorpid"},{label:"PlmAgentId",value:"qywxPlmAgentid"},{label:"PlmSecret",value:"qywxPlmSecret"},{label:"WorkAgentId",value:"qywxWorkAgentid"},{label:"WorkSecret",value:"qywxWorkSecret"},{label:"WorkComplaintDetailUrl",value:"qywxWorkComplaintDetailurl"},{label:"ReportAgentId",value:"qywxReportAgentid"},{label:"ReportSecret",value:"qywxReportSecret"},{label:"ContactsSecret",value:"qywxContactsSecret"},{label:"CCTemplateId",value:"qywxCCTemplateId"},{label:"AppAgentId",value:"qywxAppAgentid"},{label:"AppSecret",value:"qywxAppSecret"},{label:"SToken",value:"qywxSToken"},{label:"SEncodingAESKey",value:"qywxSEncodingAESKey"},{label:"是否启用企业微信",value:"qywxEnable",readonly:!0,children:[{label:"启用",value:!0},{label:"关闭",value:!1}]},{label:"CorpId",value:"pcQywxCorpid"},{label:"WorkAgentId",value:"pcQywxWorkAgentid"},{label:"WorkSecret",value:"pcQywxWorkSecret"}];H(()=>{k(),f(),t()});async function k(){try{d.value=!0;const a=await x({});p.value=a.data}catch{p.value=[]}}const f=()=>{const a=$(p);m.value=G({columnData:a,showOpt:!0,showSelection:!0,operateWidth:140})};function C(a){i.value=a.value,t()}async function t(){try{d.value=!0;const e=(await x(i.value)).data;v.value=e,c.total=e.length,c.pageSize=100,c.currentPage=1,d.value=!1}catch{d.value=!1}}const I=a=>{a&&(a.resetFields(),t())};function P(a,e){const u={add:"添加",edit:"编辑"}[a],q={id:(e==null?void 0:e.id)??"",orgName:(e==null?void 0:e.orgName)??"",shortName:(e==null?void 0:e.shortName)??"",orgCode:(e==null?void 0:e.orgCode)??"",logo:(e==null?void 0:e.logo)??"",orgAddress:(e==null?void 0:e.orgAddress)??"",tel:(e==null?void 0:e.tel)??"",tax:(e==null?void 0:e.tax)??"",status:(e==null?void 0:e.status)??"",kingdeeEnable:(e==null?void 0:e.kingdeeEnable)??"",qywxEnable:(e==null?void 0:e.qywxEnable)??"",qhEnable:(e==null?void 0:e.qhEnable)??"",orgDomain:(e==null?void 0:e.orgDomain)??"",orgDomainPort:(e==null?void 0:e.orgDomainPort)??"",qywxOrgDomain:(e==null?void 0:e.qywxOrgDomain)??"",qywxOrgDomainPort:(e==null?void 0:e.qywxOrgDomainPort)??"",kdApiAcctId:(e==null?void 0:e.kdApiAcctId)??"",kdApiAppId:(e==null?void 0:e.kdApiAppId)??"",kdApiAppSec:(e==null?void 0:e.kdApiAppSec)??"",kdApiLCID:(e==null?void 0:e.kdApiLCID)??"",kdApiServerUrl:(e==null?void 0:e.kdApiServerUrl)??"",kdApiFcreateorgid:(e==null?void 0:e.kdApiFcreateorgid)??"",kdApiFuseorgid:(e==null?void 0:e.kdApiFuseorgid)??"",qhFileHost:(e==null?void 0:e.qhFileHost)??"",qhFileIp:(e==null?void 0:e.qhFileIp)??"",qhFilePort:(e==null?void 0:e.qhFilePort)??"",qhFileUserName:(e==null?void 0:e.qhFileUserName)??"",qhFilePassword:(e==null?void 0:e.qhFilePassword)??"",qywxOauth2url:(e==null?void 0:e.qywxOauth2url)??"",qywxCorpid:(e==null?void 0:e.qywxCorpid)??"",qywxPlmAgentid:(e==null?void 0:e.qywxPlmAgentid)??"",qywxPlmSecret:(e==null?void 0:e.qywxPlmSecret)??"",qywxWorkAgentid:(e==null?void 0:e.qywxWorkAgentid)??"",qywxWorkSecret:(e==null?void 0:e.qywxWorkSecret)??"",qywxWorkComplaintDetailurl:(e==null?void 0:e.qywxWorkComplaintDetailurl)??"",qywxReportAgentid:(e==null?void 0:e.qywxReportAgentid)??"",qywxReportSecret:(e==null?void 0:e.qywxReportSecret)??"",qywxContactsSecret:(e==null?void 0:e.qywxContactsSecret)??"",qywxCCTemplateId:(e==null?void 0:e.qywxCCTemplateId)??"",qywxAppAgentid:(e==null?void 0:e.qywxAppAgentid)??"",qywxAppSecret:(e==null?void 0:e.qywxAppSecret)??"",qywxSToken:(e==null?void 0:e.qywxSToken)??"",qywxSEncodingAESKey:(e==null?void 0:e.qywxSEncodingAESKey)??"",pcQywxCorpid:(e==null?void 0:e.pcQywxCorpid)??"",pcQywxWorkAgentid:(e==null?void 0:e.pcQywxWorkAgentid)??"",pcQywxWorkSecret:(e==null?void 0:e.pcQywxWorkSecret)??""};M({title:`${u}组织`,props:{formInline:q,formConfigs:j(a)},width:"75%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>K(U,{ref:g}),beforeSure:(n,{options:E})=>{const W=g.value.getRef(),R=E.props.formInline;W.validate(T=>{T&&B.confirm("确认要提交吗?","系统提示",{type:"warning",draggable:!0,cancelButtonText:"取消",confirmButtonText:"确定",dangerouslyUseHTMLString:!0}).then(()=>{D(a,u,R,()=>{n(),t()})}).catch(()=>{})})}})}const D=(a,e,b,u)=>{({add:z,edit:N})[a](b).then(n=>{if(n.code!==200)throw n.message;u(),s.success(`${e}成功`)}).catch(n=>{s.error(n||`${e}失败`)})};function F(a){L({id:a.id}).then(e=>{if(e.code!==200)throw e.message;s.success("删除成功"),t()}).catch(e=>{s.error("删除失败")})}function r(a){i.value.limit=a,t()}function O(a){i.value.page=a,t()}function o(a){}return{tableRef:y,formData:i,loading:d,columns:m,dataList:v,maxHeight:A,pagination:c,queryParams:h,searchOptions:S,onSearch:C,resetForm:I,openDialog:P,onRowClick:a=>{var e;(e=y.value)==null||e.getTableRef().toggleRowSelection(a)},handleDelete:F,handleSizeChange:r,handleCurrentChange:O,handleSelectionChange:o}}export{te as useConfig};
